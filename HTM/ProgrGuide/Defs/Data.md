---
layout: page
title: "Data նկարագրություն"
---

# Տվյալների աղբյուրի նկարագրություն

Տվյալների պահոցից աղյուսակային տեսքով տվյալներ կարդալու և ցույց տալու համար նկարագրվում է տվյալների աղբյուր։

Աղյուսակային տվյալները հաշվարկվում են կախված ArrayBased հատկության արժեքից, կարող են ստացվել 
- կամ SQL հարցումով,
- կամ երկչափ մասիվից (XArrayDB)։

SQL հարցումը լրացվում է կամ նկարագրության մեջ կամ դինամիկ ձևավորվում է [SQL հարցման ձևավորող](../ScriptProcs/SQL.md) իրադարձության մշակիչում։  
Երկչափ մասիվը հաշվարկվում է [Load](../ScriptProcs/Load.md) իրադարձության մշակիչում։

Տվյալների աղբյուրը հետագայում հիմք է ծառայում *բազմաթիվ* [դիտելու ձևերի](View.md) կառուցման համար։

Տվյալների աղբյուրի վերդարձվող տողերը կարող են նշել որևէ փաստաթուղթ։ Դրա համար պետք է առկա լինի կա՛մ `fISN` ներքին անունով հավերժական (PERMANENT) սյունակ `NP(10,0)` ներքին տիպի, կա՛մ լրացված լինի ISN հատկությունը, որևէ սյունակի անունով, որը նույնպիսինն է։  
ISN հատկությունը կարող է հղվել այլ տիպի սյունակի վրա, այդ դեպքում այդ սյունակը կհամարվի տողի ունիկալ դաշտ և այկդ դաշտը հնարավոր է օգտագործել սկրիպտից այդ տողի հետ աշխատելու համար։

Տվյալների աղբյուրում նկարագրվում են նաև բաղկացուցիչ սյունակները և հաշվարկման պարամետրերը։

Սյունակները կարող են հղվել կամ SQL-ից վերադարձվող արժեքների վրա, կամ երկչափ մասիվի սյունակի վրա, կամ լինել հաշվարկային։ Հաշվարկային սյունակի համար ամեն տողում կանչում է դրան հաշվող ֆունկցիան։

Նկարագրվող պարամետերը կարող են օգատգործվել SQL հարցման ձևավորման համար, կամ երկչափ մասիվի հաշվարկի համար, կամ սկրիկպտային մասում այլ ֆունկցիաների հաշվարկի ընթացքում։

Նկարագրության սկրիպտային բաժնում նկարագրվում են [իրադարձությունների մշակիչներ](../scriptstproced.md), *հաշվարկային սյունակների* հաշվող ֆունկցիաներ կամ այլ պրոցեդուրաներ և ֆունկցիաներ։

## Շարահյուսություն

``` as4x
DATA {
    Name = sDataName;
    Caption = sDataCaption;
    ECaption = sDataECaption;
    SQL = sDataSQL;
    UpdateSQL = sDataUpdSQL;
    Indicate = nIndPresent;
    DefaultFunction = sDefFuncName;
    Version = nVersion;
    QueryTimeout = nQueryTimeout;
    ArrayBased = nArrayBased;
    ISN = sISN;
    DisableValidFunction = nDisableValid;
    ProcessingMode = nProcessingMode;

    'Column ...
    'Param ...

    Script {
        Subs and Functions
    };
};
```

[Տվյալների աղբյուրի սյունակների նկարագրություն](../column.md)  
[Տվյալների աղբյուրի հարցման պարամետրերի նկարագրություն](../Param.md)

Բաղադրիչներն են՝

| Պարամետր | Նկարագրություն |
|--|--|
| sDataName | Տվյալների աղբյուրի ներքին անվանում։ |
| sDataCaption | Տվյալների աղբյուրի անվանումը։ |
| sDataECaption | Տվյալների աղբյուրի գլխագիրը օտար լեզվով։ |
| sDataSQL | Սահմանում է կարճ SQL հարցում աղյուսակից տողեր ընտրելու համար։ Եթե այս պարամետրը բացակայում է և ArrayBased=0, ապա աշխատում է [SQL հարցման ձևավորող](../ScriptProcs/SQL.md) մշակիչը։ |
| sDataUpdSQL | Սահմանում է կարճ SQL հարցում աղյուսակից անհրաժեշտ տողեր ընտրելու համար, նոր տող ավելացնելու, ջնջելու կամ թարմացնելու համար։ Եթե այս պարամետրը բացակայում է և ArrayBased=0, ապա աշխատում է [SQL հարցման ձևավորող](../ScriptProcs/SQL.md) մշակիչը։ |
| nIndPresent | Տվյալների աղբյուրի կատարման ընթացքի [ցուցադրման ձևը](../Constants/const_opencursor_Indicate.md)։ |
| nQueryTimeout | SQL հարցման կատարման սպասման ժամանակը վայրկյաններով։ Կարող է ընդունել 1 մինչև 3000 արժեք։ Եթե նշված պարամետրը բացակայում է, ապա սպասման ժամանակը որոշվում է օգտագործողի դրույթներով (լռությամբ 300 վայրկյան է)։ |
| nArrayBased | Ցույց է տալիս, արդյոք տվյալների աղբյուրը հիմնված է SQL հարցման (ArrayBased=0) կամ XArrayDB (ArrayBased=1) օբյեկտի տիպի վրա։ Լռությամբ արժեքը 0 է։ Եթե արտահայտության արժեքը 1 է, ապա պարտադիր է մշակել [Load](../ScriptProcs/Load.md) իրադարձությունը։ |
| sISN | Այն սյունակի ներքին անունը, որում լինում է փաստաթղթի ներքին նույնականացման համար։ Եթե հատկությունը լրացված չէ, ապա օգտագործվում է `fISN` ներքին անունով սյունակ։ ISN-ի սյունակը պետք է լինի հավերժական (PERMANENT)։ |
| nDisableValid | 1 արժեքի դեպքում անջատվում է տվյալների աղբյուրի [Valid](../ScriptProcs/Valid_Data.md) իրադարձության կանչը։ |
| sDefFuncName | `Enter` ստեղնի սեղղման ժամանակ աշխատող գործողության ներքին անուն։ Գործողությունը պետք է հասանելի լինի համատքեստի մենյուից։ Այն կարող է լինել ինչպես միջուկային (Դիտել, Խմբագրել...), այնպես էլ սկրիպտում գրանցված այլ գործողություն (`RegistrFunction ...`)։ Տե՛ս ստորև մանրամասն արժեքների համար։ |
| nProcessingMode | Տվյալների աղբյուրը AS-8X-ում հաշվարկելու հայտանիշ։ 1 արժեքի դեպքում հաշվարկը կատարվում է AS-8X սերվիսում, եթե սերվիսը կարգավորված է և հասանելի է։ 0-ի դեպքում՝ հաշվարկվում է հին AS-4X-ի եղանակով։ Լռությամբ արժեքը 0 է։ |
| Subs and Functions | Նկարագրության սկրիպտային բաժին, որը կարող է պարունակել ինչպես [համակարգային իրադարձությունների մշակիչներ](../scriptstproced.md), այնպես էլ օգտագործողի կողմից գրված պրոցեդուրաներ և ֆունկցիաներ։ |


## DefaultFunction-ի արժեքներ

| Արժեք | Նկարագրություն |
|--|--|
| EDITITEM | Փաստաթուղթը բացում է խմբագրման ռեժիմում։ |
| VIEWITEM | Փաստաթուղթը բացում է դիտման ռեժիմում։ |
| DELETEITEM | Փաստաթուղթը ջնջում է։ |
| VISAITEM | Փաստաթուղթը բացում է վավերացման ռեժիմում։ |
| SECONDENTRYITEM | Փաստաթուղթը բացում է կրկնակի մուտքագրման ռեժիմում։ |
| Այլ արժեքներ | Կանչվում է օգտագործողի կողմից գրված այն ֆունկցիան, որը սահմանված է RegistrFunction-ի միջոցով։ |

[См. также](../Defs.md)