---
layout: page
title: "Data Definition"
---
<style type="text/css">
.style1 {
	text-decoration: underline;
}
.style3 {
	border-width: 0;
}
.style4 {
	border: 1px solid #C5C5C5;
}
.style5 {
	font-style: italic;
	border: 1px solid #C5C5C5;
}
.style6 {
	font-weight: bold;
	border: 1px solid #C5C5C5;
}
</style>





<p><strong>Описание источника данных</strong></p>

<p>&nbsp;<a href="doc.html">Документы</a> в системе хранятся в папках. Для отображения содержимого папок используются источники данных со своими колонками и запросами формирования содержимого колонок. В скриптовом разделе описания могут описываться как <a href="../scriptstproced.html">
обработчики системных событий</a>, так и пользовательские функции и процедуры. Источник данных в дальнейшем служит базисом для построения многочисленных <a href="View.html">
видов просмотра</a>.</p>

<p>&nbsp;</p>

<p><b>Синтаксис</b></p>

<strong>DATA</strong> {<strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Name</strong> = <em>
sDataName</em>;
<strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Caption</strong> = <em>sDataCaption</em>; <br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;ECaption </strong>=<strong> </strong><em>sDataECaption</em>; <strong>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SQL</strong>
= <em>sDataSQL</em>;<br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;UpdateSQL</strong> = <em>sDataUpdSQL</em>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Indicate</strong>
= <em>nIndPresent</em>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DefaultFunction</strong> = <em>sFuncName</em>;<br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Version</strong> = <em>nVersion</em>;<br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QueryTimeout </strong> = <em>nQueryTimeout</em>;<br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ArrayBased</strong> = <em>nArrayBased</em>;<br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ISN </strong>=<strong> </strong><em>nISN</em><strong>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DisableValidFunction </strong>=<strong> </strong><em>nValueDisable</em><strong>;<br>
&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong>
{<em><a href="../column.html">Описания колонок источника данных</a></em>}<strong>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong>
{<a href="../Param.html"><em>Параметры SQL</em><em>-запроса источника данных</em></a>};<strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;</strong><br>
<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script</strong> {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subs and Functions</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;};<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };<br>


<p>Синтаксис описания источника данных состоит из следующих частей:</p>

<table cellPadding="5" cols="2" frame="below" rules="rows">
<TBODY>
  <tr>
    <td></td>
    <td>Параметр</td>
    <td><strong>Описание</strong></td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sDataName</em></td>
    <td>строковое выражение, определяющее идентификатор источника данных</td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sDataCaption</em></td>
    <td>строковое выражение, определяющее наименование-заголовок<br>
    источника данных </td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sDataECaption</em></td>
    <td>строковое выражение, определяющее наименование-заголовок<br>
    источника данных на иностранном языке.</td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sDataSQL</em></td>
    <td>строковое выражение, определяющее SQL запрос для выборки определенных строк из таблицы. Если данный параметр опущен и ArrayBased=0, то выполняется обработчик <a href="../ScriptProcs/SQL.html">
	события SQL</a>.</td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sDataUpdSQL</em></td>
    <td>строковое выражение, определяющее обновляющий SQL запрос для выборки нужных строк из таблицы, после добавления, удаления или корректировки строчки. Если данный параметр опущен ArrayBased=0, то выполняется обработчик <a href="../ScriptProcs/SQL.html">события SQL</a>.</td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>nIndPresent</em></td>
    <td>необязательное численное выражение, определяющее внешний вид индикации открытия источника данных. Оно принимает значения 0 (появляются только песочные часы), 1 (появляется индикатор продвижения выполнения запроса), 2 (отсутствуют песочные часы и индикатор). Значением по умолчанию является 0.</td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>nVersion</em></td>
    <td>численное выражение целого типа, определяющее номер версии описания источника данных</td>
  </tr>
  <tr>
    <td>
	<img src="../../../IMAGES/pubfield.gif"></td>
    <td> <em>nQueryTimeout</em></td>
    <td>необязательное численное выражение целого типа, определяющее время ожидания в секундах при выполнении SQL запроса. Может принимать значение от 1 до 3000. Если данный параметр опущен, то время ожидания - 300 секунд. </td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td> <em>nArrayBased</em></td>
    <td>необязательное числовое выражение, принимающее значения 1 или 0, определяющее является ли источник данных основанным на SQL запросе (ArrayBased=0) или на объекте типа XArrayDB (ArrayBased=1). По умолчанию принимает значение 0. Если значение выражения равно 1, то обязательно должно быть обработано событие <a href="../ScriptProcs/Load.html">
	Load</a>.</td>
  </tr>
	<tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td> <em>n</em><em>ISN</em></td>
    <td>необязательное строковое выражение, определяющее идентификатор колонки соответсвующий ISN документа. Если данное свойство опущено, то за колонку ISN принимается колонка со значением свойства
	<strong>Field равным fISN (если таковая кочно имеется).</strong></td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>nValueDisable</em></td>
    <td>необязательное числовое выражение. Значение 1 позволяет блокировать вызов события
	<a href="../ScriptProcs/Valid_Data.html">Valid</a> источника данных<strong>.</strong></td>
  </tr>
  <tr>
    <td><img src="../../../IMAGES/pubfield.gif"></td>
    <td><em>sFuncName</em></td>
    <td>строковое выражение, определяющее имя контекстно-вызываемой процедуры при двойном щелчке мыши либо при нажатии клавиши Enter.</td>
  </tr>
</TBODY>
  <tr>
    <td>
	<img src="../../../IMAGES/pubmethod.gif" height="11"></td>
    <td>Subs and Functions</td>
    <td>скриптовый раздел описания, который может содержать как <a href="../scriptstproced.html">обработчики системных событий</a>, так и пользовательские процедуры и функции</td>
  </tr>
</table>

<p>&nbsp;</p>

<p><b>Установки</b></p>

<p>Установки для <em>sFuncName</em>
следующие:</p>

<table cellPadding="5" cols="2" frame="below" rules="rows">
<TBODY>
  <tr>
    <td><strong>Значение</strong></td>
    <td><strong>Описание</strong></td>
  </tr>
  <tr>
    <td><strong><em>EDITITEM</em></strong></td>
    <td>документ вызывается в режиме корректировки</td>
  </tr>
  <tr>
    <td><strong><em>VIEWITEM</em></strong></td>
    <td>документ вызывается в режиме просмотра</td>
  </tr>
  <tr>
    <td><em><strong>DELETEITEM</strong></em></td>
    <td>документ вызывается для удаления</td>
  </tr>
  <tr>
    <td><strong><em>VISAITEM</em></strong></td>
    <td>документ вызывается для визирования</td>
  </tr>
  <tr>
    <td><strong><em>SECONDENTRYITEM</em></strong></td>
    <td>документ вызывается для повторного ввода</td>
  </tr>
  <tr>
    <td><strong><em>другое значение</em></strong></td>
    <td>вызывается пользовательская процедура, указанная как контекстно-вызываемая (т.е. указана в RegistrFunction).</td>
  </tr>
</table>

<p>&nbsp;</p>

<p><b>Примечание</b></p>

<p>Параметры служат для подстановки в SQL запрос. Но иногда число параметров в источнике данных может превышать число параметров, необходимых для подстановки в SQL запрос.</p>

<p><a href="../Defs.html">См. также</a></p>

<p>&nbsp;</p>


